# 商业化规则 (基于广告)

## 1. 核心原则

-   **用户体验优先**: 核心聊天体验必须保持无广告、无打扰。我们的目标是覆盖运营成本，而非牺牲用户满意度来最大化收益。
-   **公开透明**: 用户应清楚地理解他们为什么会看到广告，以及作为回报他们将获得什么。
-   **价值交换**: 广告模式是一种价值交换。用户付出他们的注意力，作为回报，他们将获得对优质内容（一个新的AI角色）的永久使用权。

## 2. 广告实现细则

-   **广告API**: 我们将使用 **Taro 框架的广告 API** (例如 `Taro.createRewardedVideoAd`)。
-   **平台实现**:
    *   **微信小程序端**: Taro API 会自动调用微信小程序的官方广告组件，完全符合现有逻辑。
    *   **其他平台 (H5/App)**: 未来扩展到其他平台时，需要接入相应平台的广告SDK，并可能需要通过条件编译来管理不同平台的广告逻辑。当前阶段，我们聚焦于小程序平台的实现。
-   **广告格式**: 使用的唯一广告格式是**“激励式视频广告”**。这种格式由用户主动触发，并在观看完成后提供明确的奖励。
-   **广告位**: 激励式视频广告**仅**在用户试图从角色选择界面/面板解锁一个“精品AI角色”时展示。应用内不会有任何其他形式的广告（例如，横幅广告、插屏广告）。

## 3. 解锁角色的用户流程

1.  **用户操作**: 用户进入“邀请AI”或“角色池”界面，并点击一个被锁定的精品AI角色。
2.  **广告提示**: 一个模态对话框将会出现，展示该角色的详细信息（头像、名称、简介）。对话框将包含一个明确的行动号召按钮，例如“观看广告以解锁”。同时，也会有一段简短、明确的文字说明，告知用户观看一段短视频即可永久解锁此角色。
3.  **广告展示**: 用户点击按钮后，将触发Taro的激励式视频广告API，并播放视频。
4.  **奖励发放**:
    -   **成功**: 如果用户完整观看了广告，广告组件的 `onClose` 事件将返回观看成功的状态。后端将收到通知，为用户授予对该角色的永久访问权限。UI将更新以显示该角色已解锁，用户可以立即将其添加到聊天中。
    -   **失败/跳过**: 如果用户提前关闭了广告，该角色将保持锁定状态。UI应返回到角色选择屏幕，不应有任何惩罚性提示。
5.  **解锁之后**: 一旦一个角色被解锁，用户将永远不会再看到关于该角色的广告。

## 4. 数据追踪与分析

为了确保此模式能够覆盖成本，必须追踪以下事件：

-   `ad_impression`: 当“观看广告以解锁”的对话框向用户展示时触发。
    -   属性: `userId`, `characterId`
-   `ad_request_start`: 当用户点击“观看广告以解锁”按钮时触发。
    -   属性: `userId`, `characterId`
-   `ad_reward_granted`: 当用户成功完成广告观看并被授予角色时触发。
    -   属性: `userId`, `characterId`

这些数据将用于内部数据分析，以监控项目的可持续性。

## 5. 对技术和数据模型的影响

-   **技术规则**: `TECHNICAL_RULES.md` 已更新为使用 Taro 框架。Taro 的广告 API 将用于处理广告集成。
-   **数据模型**: `DATA_MODEL.md` 中的 `User` 模型已包含 `unlockedCharacterIds` 字段，无需更改。