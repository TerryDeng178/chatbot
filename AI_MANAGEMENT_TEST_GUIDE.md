# AI管理功能测试指南

## 🧪 测试概述
本文档用于测试群聊AI管理功能，包括AI添加、移除、状态管理等核心功能。

## 📱 测试环境准备

### 1. 小程序环境
- 确保微信开发者工具已安装
- 项目已正确配置云开发环境
- 云函数已部署完成

### 2. 测试数据准备
- 创建测试群聊
- 准备测试用户账号
- 确保AI性格数据已加载

## 🔍 功能测试清单

### 1. AI管理按钮测试
- [ ] 顶部导航栏显示AI管理按钮
- [ ] 按钮样式正确（红色渐变）
- [ ] 点击按钮显示AI管理界面

### 2. AI选择器测试
- [ ] 点击AI选择器按钮显示弹窗
- [ ] 弹窗样式美观（紫色渐变头部）
- [ ] AI列表正确显示
- [ ] 已激活AI显示状态标识
- [ ] 选择AI功能正常

### 3. 多AI选择器测试
- [ ] 点击多AI选择器按钮显示弹窗
- [ ] 弹窗样式美观（红色渐变头部）
- [ ] 显示当前激活AI数量统计
- [ ] AI列表正确显示激活状态
- [ ] 切换AI激活状态功能正常

### 4. 添加AI选择器测试
- [ ] 点击"添加新AI"按钮显示弹窗
- [ ] 弹窗样式美观（绿色渐变头部）
- [ ] 只显示未激活的AI
- [ ] 显示可添加AI数量统计
- [ ] 添加AI功能正常

### 5. AI状态显示测试
- [ ] 多AI模式下显示AI状态栏
- [ ] 状态栏样式美观（卡片式设计）
- [ ] 正确显示活跃AI数量
- [ ] AI状态指示器动画正常

### 6. 系统消息测试
- [ ] 添加AI后显示系统消息
- [ ] 系统消息样式正确
- [ ] 消息内容准确

## 🎯 测试步骤

### 步骤1：基础功能测试
1. 打开群聊页面
2. 检查顶部导航栏AI管理按钮
3. 点击AI选择器按钮
4. 验证弹窗显示和样式

### 步骤2：AI管理测试
1. 点击AI管理按钮
2. 在多AI选择器中切换AI状态
3. 验证AI状态变化
4. 检查AI状态显示栏更新

### 步骤3：添加AI测试
1. 在AI选择器中点击"添加新AI"
2. 选择要添加的AI
3. 验证AI成功添加到群聊
4. 检查系统消息显示

### 步骤4：多AI模式测试
1. 切换多AI模式
2. 激活多个AI
3. 发送消息测试AI回复
4. 验证多AI同时工作

## 🐛 常见问题排查

### 1. 弹窗不显示
- 检查JavaScript函数是否正确绑定
- 验证数据状态是否正确设置
- 检查CSS样式是否正确加载

### 2. AI状态不正确
- 检查activeAIs数组数据
- 验证AI选择器逻辑
- 检查云函数调用结果

### 3. 样式显示异常
- 检查CSS文件是否正确引入
- 验证样式类名是否正确
- 检查微信开发者工具版本

### 4. 功能不响应
- 检查事件绑定是否正确
- 验证函数定义是否完整
- 检查控制台错误信息

## 📊 测试结果记录

### 测试日期：_________
### 测试人员：_________

| 功能模块 | 测试结果 | 问题描述 | 修复状态 |
|---------|---------|---------|---------|
| AI管理按钮 | ⭕/❌ |          |          |
| AI选择器 | ⭕/❌ |          |          |
| 多AI选择器 | ⭕/❌ |          |          |
| 添加AI选择器 | ⭕/❌ |          |          |
| AI状态显示 | ⭕/❌ |          |          |
| 系统消息 | ⭕/❌ |          |          |

### 总体评价：_________
### 建议改进：_________

## 🔧 调试技巧

### 1. 控制台调试
```javascript
// 在关键函数中添加console.log
console.log('当前activeAIs:', this.data.activeAIs)
console.log('AI性格数据:', this.data.aiPersonalities)
```

### 2. 数据状态检查
```javascript
// 检查页面数据状态
console.log('页面数据:', this.data)
```

### 3. 网络请求调试
```javascript
// 检查云函数调用
wx.cloud.callFunction({
  name: 'group-chat-multi-ai',
  data: { /* 参数 */ }
}).then(res => {
  console.log('云函数返回:', res)
}).catch(err => {
  console.error('云函数错误:', err)
})
```

## 📞 技术支持

如遇到问题，请提供以下信息：
1. 错误截图
2. 控制台错误信息
3. 复现步骤
4. 测试环境信息

---

*测试指南版本: v1.0*
*最后更新: 2024-01-XX*
